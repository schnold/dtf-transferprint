---
interface Props {
	title: string;
	description: string;
	image?: string;
	imageAlt?: string;
	video?: string;
	images?: Array<{
		src?: string;
		video?: string;
		alt: string;
	}>;
	features?: Array<{
		icon: string;
		text: string;
	}>;
	badges?: string[];
	align?: 'left' | 'right';
}

const { 
	title, 
	description, 
	image, 
	imageAlt, 
	video,
	images = [],
	features = [], 
	badges = [],
	align = 'left' 
} = Astro.props;

const isLeft = align === 'left';
const hasGallery = images.length > 0;
const displayVideo = video;
const displayImage = image || (images.length > 0 ? images[0].src ?? '' : '');
const displayAlt = imageAlt || (images.length > 0 ? images[0].alt : '');
---

<div class={`flex flex-col ${isLeft ? 'lg:flex-row' : 'lg:flex-row-reverse'} gap-8 lg:gap-32 items-center overflow-x-visible lg:px-8`}>
	<!-- Image Section -->
	<div class={`w-full lg:w-3/5 ${isLeft ? 'lg:-ml-40 lg:mr-0' : 'lg:-mr-40 lg:ml-0'}`}>
		{hasGallery ? (
			<!-- Gallery -->
			<div class="grid grid-cols-2 gap-3">
				<figure class="relative overflow-hidden rounded-2xl shadow-lg col-span-2 aspect-[4/3]">
					{images[0].video ? (
						<video
							src={images[0].video}
							class="w-full h-full object-cover"
							autoplay
							muted
							loop
							playsinline
							aria-label={images[0].alt}
						/>
					) : (
						<img 
							src={images[0].src} 
							alt={images[0].alt}
							class="w-full h-full object-cover"
							loading="eager"
						/>
					)}
				</figure>
				{images.slice(1).map((item) => (
					<figure class="relative overflow-hidden rounded-2xl shadow-lg aspect-square">
						{item.video ? (
							<video
								src={item.video}
								class="w-full h-full object-cover"
								autoplay
								muted
								loop
								playsinline
								aria-label={item.alt}
							/>
						) : (
							<img 
								src={item.src} 
								alt={item.alt}
								class="w-full h-full object-cover"
								loading="lazy"
							/>
						)}
					</figure>
				))}
			</div>
		) : displayVideo ? (
			<!-- Single Video -->
			<figure class="relative overflow-hidden rounded-2xl shadow-lg aspect-video">
				<video
					src={displayVideo}
					class="w-full h-full object-cover"
					autoplay
					muted
					loop
					playsinline
					aria-label={displayAlt || title}
				/>
			</figure>
		) : (
			<!-- Single Image -->
			<figure class="relative overflow-hidden rounded-2xl shadow-lg">
				<img 
					src={displayImage} 
					alt={displayAlt}
					class="w-full h-auto object-cover"
					loading="lazy"
				/>
			</figure>
		)}
	</div>

	<!-- Content Section -->
	<div class="w-full lg:w-2/5">
		<div class="space-y-6">
			<!-- Title -->
			<h3 class="text-2xl md:text-3xl font-bold text-neutral leading-tight">
				{title}
			</h3>

			<!-- Description -->
			<p class="text-base text-neutral/80 leading-relaxed">
				{description}
			</p>

			<!-- Features List -->
			{features.length > 0 && (
				<ul class="space-y-4">
					{features.map((feature) => {
						// Use yellow color for icons in specific sections
						const yellowSections = [
							"Was macht Selini-Shirt aus?",
							"Ihr Premium-Partner für DTF-Drucke im B2B-Bereich",
							"Veredelung - Keine Zeit zum Pressen?"
						];
						const useYellow = yellowSections.includes(title);
						
						return (
							<li class="flex items-start gap-4">
								<div 
									class={`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${useYellow ? '' : 'bg-primary/10'}`}
									style={useYellow ? `background-color: var(--color-yellow-accent-10);` : ''}
								>
									{feature.icon && (
										<span 
											class={`w-5 h-5 ${useYellow ? '' : 'text-primary'}`}
											style={useYellow ? `color: var(--color-yellow-accent-dark);` : ''}
											set:html={feature.icon} 
										/>
									)}
								</div>
								<p class="text-sm text-neutral/80 leading-relaxed pt-1 flex-1">{feature.text}</p>
							</li>
						);
					})}
				</ul>
			)}

			<!-- Badges -->
			{badges.length > 0 && (
				<div class="flex flex-wrap gap-2 pt-4">
					{badges.map((badge) => {
						// Use yellow color for badges in specific sections
						const yellowSections = [
							"Was macht Selini-Shirt aus?",
							"Ihr Premium-Partner für DTF-Drucke im B2B-Bereich",
							"Veredelung - Keine Zeit zum Pressen?"
						];
						const useYellow = yellowSections.includes(title);
						
						return (
							<span 
								class={`badge badge-lg ${useYellow ? '' : 'badge-primary'}`}
								style={useYellow ? `background-color: var(--color-yellow-accent); color: #1c1917; border-color: var(--color-yellow-accent);` : ''}
							>
								{badge}
							</span>
						);
					})}
				</div>
			)}
		</div>
	</div>
</div>
